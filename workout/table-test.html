<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        * { padding:0; margin:0; }
        html, body {
            width:100%;
            height:100%;
        }
        table {
            width: 100%;
            height : 80%;
            border-top:1px solid #cccccc;
            box-sizing: border-box;
            border-collapse: collapse;
        }
        th, td {
            text-align: left;
            box-sizing: border-box;
            border-bottom: 1px solid #cccccc;
        }
    </style>
</head>
<body>
    <table>
        <thead>
                <tr>
                        <th><input type="checkbox" class="all"></th>
                        <th>name</th>
                        <th>weight</th>
                        <th>set</th>
                    </tr>
        </thead>
       
        <tbody>
                <tr>
                        <td><input type="checkbox"></td>
                        <td name="name" value="push up">push up</td>
                        <td name="weight" value="0">0</td>
                        <td name="set" value="5">
                            <select>
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option selected>5</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td name="name" value="push up">push up</td>
                        <td name="weight" value="0">0</td>
                        <td name="set" value="5">
                            <select>
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option selected>5</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td name="name" value="push up">push up</td>
                        <td name="weight" value="0">0</td>
                        <td name="set" value="5">
                            <select>
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option selected>5</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                            <td><input type="checkbox"></td>
                            <td name="name" value="push up">push up</td>
                            <td name="weight" value="0">0</td>
                            <td name="set" value="5">
                                <select>
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option selected>5</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                                <td><input type="checkbox"></td>
                                <td name="name" value="push up">push up</td>
                                <td name="weight" value="0">0</td>
                                <td name="set" value="5">
                                    <select>
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option selected>5</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                    <td><input type="checkbox"></td>
                                    <td name="name" value="push up">push up</td>
                                    <td name="weight" value="0">0</td>
                                    <td name="set" value="5">
                                        <select>
                                            <option>1</option>
                                            <option>2</option>
                                            <option>3</option>
                                            <option>4</option>
                                            <option selected>5</option>
                                        </select>
                                    </td>
                                </tr>
        </tbody>
    </table>
    <button>save</button>
</body>
<script>
    document.querySelector('button').addEventListener('click', function() {
        const checkedBoxes = document.querySelectorAll('input:checked:not(.all)');
        const checkedRows = Array.prototype.slice.call(checkedBoxes);
        const cols = checkedRows.map(function(element){
            const rows = Array.prototype.slice.call(element.closest('tr').children, 1);
            const objs = rows.reduce(function(result, item, index) {
                const obj = {};
                obj[item.getAttribute('name')] = item.getAttribute('value');
                return {
                    ...obj, ...result
                }
            }, {});
            return objs;
        });
        console.dir(cols);
    });

    document.querySelectorAll('select').forEach(function(element){
        element.addEventListener('change', function(event){
            const target = event.target;
            if(!target) return;
            target.closest('td').setAttribute('value', target.value);
        });
    })

    document.querySelector('input[type=checkbox]:first-child').addEventListener('click', function(event){
        const checked = event.target.checked;
        const checkboxes = document.querySelectorAll('input[type=checkbox]:not(.all)');
        checkboxes.forEach(function(element){
                element.checked = checked;
        });
    });
</script>
</html>